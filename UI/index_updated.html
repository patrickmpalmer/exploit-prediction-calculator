<!DOCTYPE html>
<html>
<head>
<title>Exploit Prediction Calculator</title>
<script src="https://kit.fontawesome.com/1b65f66586.js" crossorigin="anonymous"></script>
<script type="text/javascript">

function checkVisibilityPasteBox() {

  var x = document.getElementById("paste-box");
  var y = document.getElementById("file-upload-box");

  if (window.getComputedStyle(x).visibility === "hidden" && window.getComputedStyle(y).visibility === "hidden") {
    x.style.visibility = "visible";
  }
  else if (window.getComputedStyle(x).visibility === "hidden" && window.getComputedStyle(y).visibility === "visible") {
    x.style.visibility = "visible";
    y.style.visibility = "hidden";
  }
  else {
  	x.style.visibility = "hidden";
  }
}

function checkVisibilityUploadBox() {

  var x = document.getElementById("paste-box");
  var y = document.getElementById("file-upload-box");

  if (window.getComputedStyle(y).visibility === "hidden" && window.getComputedStyle(x).visibility === "hidden") {
    y.style.visibility = "visible";
  }
  else if (window.getComputedStyle(y).visibility === "hidden" && window.getComputedStyle(x).visibility === "visible") {
    y.style.visibility = "visible";
    x.style.visibility = "hidden";
  }
  else {
    y.style.visibility = "hidden";
  }
}

var reader;

function checkFileAPI() {
  if (window.File && window.FileReader && window.FileList && window.Blob) {
    reader = new FileReader();
    return true; 
  } else {
    alert('The File APIs are not fully supported by your browser.');
    return false;
  }
}

function readText(filePath) {
  var x = document.getElementById("paste-box");
  var y = document.getElementById("file-upload-box");
  y.style.visibility = "hidden";
  var vector_string = "";
  if(filePath.files && filePath.files[0]) {           
    reader.onload = function (e) {
      vector_string = e.target.result;
      document.getElementById('cvss-input').value = vector_string;
      document.getElementById('cvss-button').form.submit();
    };
    reader.readAsText(filePath.files[0]);
  }
  else {
    return false;
  }       
return true;
}

</script>
</head>
<body onload="checkFileAPI();" style="background-color: rgb(50, 55, 58);">
<div style="height: 300px; width: 100%; text-align: center; color: white; font-size: 3em; font-family: 'Helvetica'; line-height: 250px">Exploit Prediction Calculator</div>
<div style="height: 400px; width: 100%; display: flex; justify-content: center;">
  <div>
	  <button onclick="checkVisibilityPasteBox()" style="height: 200px; width: 200px; background-color: rgb(144, 237, 143); border-radius: 25px; border-style: none;">
	    <i class="fas fa-paste fa-10x" style="vertical-align: middle;"></i>
	  </button>
	  <p style="color: white; font-family: 'Helvetica'; text-align: center;">enter/paste vector string</p>
  </div>
  <div style="width: 100px;"></div>
  <div>
	  <button onclick="checkVisibilityUploadBox()" style="height: 200px; width: 200px; background-color: rgb(61, 148, 247); border-radius: 25px; border-style: none;">
	    <i class="fas fa-upload fa-10x" style="vertical-align: middle;"></i>
	  </button>
	  <p style="color: white; font-family: 'Helvetica'; text-align: center;">upload file from system</p>
  </div>
</div>

<form id="paste-box" style="height: 40px; width: 100%; display: flex; justify-content: center; visibility: hidden;" method="POST">
  <input id="cvss-input" type="text" placeholder="&nbsp Enter a valid vector string..." name="vector_string" style="width: 600px;">
  <button id="cvss-button" type="submit" style="background-color: rgb(144, 237, 143); width: 80px;">
  	<i class="fa fa-long-arrow-alt-right fa-3x"></i>
  </button>
</form>
<div style="width: 100%; display: flex; justify-content: center; visibility: hidden;">
  <input id="file-upload-box" type="file" onchange='readText(this)' style="visibility: hidden; width: 160px; color: white;"/>
</div>

</body>
</html>